---
title: Mini Pagenavi 分页导航
author: 老杨
layout: post
permalink: /276.html
categories:
  - 老杨转载
tags:
  - wordpress
---
willin 出品的 Mini Pagenavi zww修改版，带“上一页”、“下一页”链接版本。  


  
1. 把下面的代码都扔到主题的 functions.php 里面

<pre style="margin:15px 0;font:100 12px/18px monaco, andale mono, courier new;padding:10px 12px;border:#ccc 1px solid;border-left-width:4px;background-color:#fefefe;box-shadow:0 0 4px #eee;word-break:break-all;word-wrap:break-word;color:#444">/* Mini Pagenavi v1.0 by Willin Kan. Edit by zwwooooo */<br />if ( !function_exists('pagenavi') ) {<br />	function pagenavi( $p = 5 ) { // 取当前页前后各 2 页<br />		if ( is_singular() ) return; // 文章与插页不用<br />		global $wp_query, $paged;<br />		$max_page = $wp_query-&gt;max_num_pages;<br />		if ( $max_page == 1 ) return; // 只有一页不用<br />		if ( empty( $paged ) ) $paged = 1;<br />		echo '<span style="color:#170">&lt;span</span> <span style="color:#00c">class</span>=<span style="color:#a11">"pages"</span><span style="color:#170">&gt;</span>Page: ' . $paged . ' of ' . $max_page . ' <span style="color:#170">&lt;/span</span><span style="color:#170">&gt;</span> '; // 显示页数<br />		if ( $paged &gt; 1 ) p_link( $paged - 1, '上一页', '« Previous' );/* 如果当前页大于1就显示上一页链接 */<br />		if ( $paged &gt; $p + 1 ) p_link( 1, '最前页' );<br />		if ( $paged &gt; $p + 2 ) echo '... ';<br />		for( $i = $paged - $p; $i <span style="color:#170">&lt;</span>= <span style="color:#a11">$paged</span> <span style="color:#00c">+</span> <span style="color:#00c">$p;</span> <span style="color:#00c">$i++</span> <span style="color:#00c">)</span> <span style="color:#00c">{</span> <span style="color:#00c">/</span><span style="color:#00c">/</span> <span style="color:#00c">中间页</span><br />			<span style="color:#00c">if</span> <span style="color:#00c">(</span> <span style="color:#00c">$i</span> <span style="color:#170">&gt;</span> 0 <span style="color:#219">&& $i &lt;= $max_page ) $i == $paged ? print "&lt;span class='page-numbers current'&gt;{$i}&lt;/span&gt; " : p_link( $i );</span><br />		}<br />		if ( $paged <span style="color:#170">&lt; $max_page</span> <span style="color:#00c">-</span> <span style="color:#00c">$p</span> <span style="color:#00c">-</span> <span style="color:#00c">1</span> <span style="color:#00c">)</span> <span style="color:#00c">echo</span> <span style="color:#a11">'... '</span><span style="color:#@cm-word">;</span><br />		<span style="color:#@cm-word">if</span> <span style="color:#@cm-word">(</span> <span style="color:#@cm-word">$paged</span> <span style="color:#@cm-word">&lt;</span> <span style="color:#@cm-word">$max_page</span> <span style="color:#@cm-word">-</span> <span style="color:#@cm-word">$p</span> <span style="color:#@cm-word">)</span> <span style="color:#@cm-word">p_link(</span> <span style="color:#@cm-word">$max_page,</span> <span style="color:#a11">'最后页'</span> <span style="color:#@cm-word">);</span><br />		<span style="color:#@cm-word">if</span> <span style="color:#@cm-word">(</span> <span style="color:#@cm-word">$paged</span> <span style="color:#@cm-word">&lt;</span> <span style="color:#@cm-word">$max_page</span> <span style="color:#@cm-word">)</span> <span style="color:#@cm-word">p_link(</span> <span style="color:#@cm-word">$paged</span> <span style="color:#@cm-word">+</span> <span style="color:#@cm-word">1,</span><span style="color:#a11">'下一页'</span><span style="color:#@cm-word">,</span> <span style="color:#a11">'Next »'</span> <span style="color:#@cm-word">);</span><span style="color:#@cm-word">/*</span> <span style="color:#@cm-word">如果当前页不是最后一页显示下一页链接</span> <span style="color:#@cm-word">*</span><span style="color:#@cm-word">/</span><br />	<span style="color:#@cm-word">}</span><br />	<span style="color:#@cm-word">function</span> <span style="color:#@cm-word">p_link(</span> <span style="color:#@cm-word">$i,</span> <span style="color:#@cm-word">$title</span> = <span style="color:#a11">''</span><span style="color:#@cm-word">,</span> <span style="color:#@cm-word">$linktype</span> = <span style="color:#a11">''</span> <span style="color:#@cm-word">)</span> <span style="color:#@cm-word">{</span><br />		<span style="color:#@cm-word">if</span> <span style="color:#@cm-word">(</span> <span style="color:#@cm-word">$title</span> == <span style="color:#a11">''</span> <span style="color:#@cm-word">)</span> <span style="color:#@cm-word">$title</span> = <span style="color:#a11">"第 {$i} 页"</span><span style="color:#@cm-word">;</span><br />		<span style="color:#@cm-word">if</span> <span style="color:#@cm-word">(</span> <span style="color:#@cm-word">$linktype</span> == <span style="color:#a11">''</span> <span style="color:#@cm-word">)</span> <span style="color:#@cm-word">{</span> <span style="color:#@cm-word">$linktext</span> = <span style="color:#@cm-word">$i;</span> <span style="color:#@cm-word">}</span> <span style="color:#@cm-word">else</span> <span style="color:#@cm-word">{</span> <span style="color:#@cm-word">$linktext</span> = <span style="color:#@cm-word">$linktype;</span> <span style="color:#@cm-word">}</span><br />		<span style="color:#@cm-word">echo</span> <span style="color:#a11">"&lt;a class='page-numbers' href='"</span><span style="color:#@cm-word">,</span> <span style="color:#@cm-word">esc_html(</span> <span style="color:#@cm-word">get_pagenum_link(</span> <span style="color:#@cm-word">$i</span> <span style="color:#@cm-word">)</span> <span style="color:#@cm-word">),</span> <span style="color:#a11">"' title='{$title}'&gt;{$linktext}&lt;/a&gt; "</span><span style="color:#@cm-word">;</span><br />	<span style="color:#@cm-word">}</span><br /><span style="color:#@cm-word">}</span><br /><span style="color:#@cm-word">/</span><span style="color:#@cm-word">/</span> <span style="color:#@cm-word">--</span> <span style="color:#@cm-word">END</span> <span style="color:#@cm-word">----------------------------------------</span></pre>

2. 在 index.php/home.php/archive.php等页面调用

<pre style="margin:15px 0;font:100 12px/18px monaco, andale mono, courier new;padding:10px 12px;border:#ccc 1px solid;border-left-width:4px;background-color:#fefefe;box-shadow:0 0 4px #eee;word-break:break-all;word-wrap:break-word;color:#444"><span style="color:#555">&lt;?php</span> <span style="color:#708">if</span> (<span style="color:#@cm-word">function_exists</span>(<span style="color:#a11">'pagenavi'</span>)) { <span style="color:#@cm-word">pagenavi</span>(); } <span style="color:#555">?&gt;</span></pre>

3. 我的导航样式css参考

<pre style="margin:15px 0;font:100 12px/18px monaco, andale mono, courier new;padding:10px 12px;border:#ccc 1px solid;border-left-width:4px;background-color:#fefefe;box-shadow:0 0 4px #eee;word-break:break-all;word-wrap:break-word;color:#444"><span style="color:#a50">/* 分页导航 #pagination */</span><br /><span style="color:#219">#pagination</span> {<br />    <span style="color:#000">text-align</span>: <span style="color:#164">center</span>;<br />}<br /><span style="color:#219">#pagination</span>, <span style="color:#219">#navigation</span> {<br />    <span style="color:#000">background-image</span>: <span style="color:#164">linear-gradient</span><span style="color:#164">(to</span> <span style="color:#164">top</span>, <span style="color:#219">#F2F2F2</span> <span style="color:#164">0px</span>, <span style="color:#219">#FFFFFF</span> <span style="color:#164">40px</span><span style="color:#164">)</span>;<br />    <span style="color:#000">border-bottom</span>: <span style="color:#164">2px</span> <span style="color:#164">solid</span> <span style="color:#219">#E4E5E1</span>;<br />    <span style="color:#000">height</span>: <span style="color:#164">24px</span>;<br />    <span style="color:#000">line-height</span>: <span style="color:#164">24px</span>;<br />    <span style="color:#000">padding</span>: <span style="color:#164">20px</span> <span style="color:#164">20px</span> <span style="color:#164"></span>;<br />    <span style="color:#000">position</span>: <span style="color:#164">relative</span>;<br />    <span style="color:#000">text-align</span>: <span style="color:#164">center</span>;<br />}<br /><span style="color:#219">#pagination</span> {<br />    <span style="color:#000">background</span>: <span style="color:#164">none</span> <span style="color:#164">repeat</span> <span style="color:#164">scroll</span> <span style="color:#164"></span> <span style="color:#164"></span> <span style="color:#164">rgba</span><span style="color:#164">(0</span>, <span style="color:#164"></span>, <span style="color:#164"></span>, <span style="color:#164"></span><span style="color:#164">)</span>;<br />    <span style="color:#000">border-bottom</span>: <span style="color:#164">medium</span> <span style="color:#164">none</span>;<br />}<br /><span style="color:#219">#navigation</span>:<span style="color:#170">before</span> {<br />    <span style="color:#000">border-bottom</span>: <span style="color:#164">10px</span> <span style="color:#164">solid</span> <span style="color:#219">#B4B5B1</span>;<br />    <span style="color:#000">border-left</span>: <span style="color:#164">10px</span> <span style="color:#164">solid</span> <span style="color:#219">#FFFFFF</span>;<br />    <span style="color:#000">bottom</span>: <span style="color:#164">-2px</span>;<br />    <span style="color:#000">content</span>: <span style="color:#a11">""</span>;<br />    <span style="color:#000">left</span>: <span style="color:#164">-10px</span>;<br />    <span style="color:#000">position</span>: <span style="color:#164">absolute</span>;<br />}<br /><span style="color:#219">#navigation</span>:<span style="color:#170">after</span> {<br />    <span style="color:#000">border-bottom</span>: <span style="color:#164">10px</span> <span style="color:#164">solid</span> <span style="color:#219">#B4B5B1</span>;<br />    <span style="color:#000">border-right</span>: <span style="color:#164">10px</span> <span style="color:#164">solid</span> <span style="color:#219">#FFFFFF</span>;<br />    <span style="color:#000">bottom</span>: <span style="color:#164">-2px</span>;<br />    <span style="color:#000">content</span>: <span style="color:#a11">""</span>;<br />    <span style="color:#000">position</span>: <span style="color:#164">absolute</span>;<br />    <span style="color:#000">right</span>: <span style="color:#164">-10px</span>;<br />}<br />.<span style="color:#170">page-numbers</span>, <span style="color:#219">#pagination</span> <span style="color:#170">em</span>, .<span style="color:#170">prev-page</span> .<span style="color:#170">page-numbers</span>, .<span style="color:#170">next-page</span> .<span style="color:#170">page-numbers</span>, .<span style="color:#170">begin-page</span>, .<span style="color:#170">end-page</span> {<br />    <span style="color:#000">background</span>: <span style="color:#164">none</span> <span style="color:#164">repeat</span> <span style="color:#164">scroll</span> <span style="color:#164"></span> <span style="color:#164"></span> <span style="color:#219">#E4E5E1</span>;<br />    <span style="color:#000">color</span>: <span style="color:#219">#848581</span>;<br />    <span style="color:#000">display</span>: <span style="color:#164">inline-block</span>;<br />    <span style="color:#000">font-size</span>: <span style="color:#164">14px</span>;<br />    <span style="color:#000">height</span>: <span style="color:#164">24px</span>;<br />    <span style="color:#000">line-height</span>: <span style="color:#164">24px</span>;<br />    <span style="color:#000">margin-right</span>: <span style="color:#164">3px</span>;<br />    <span style="color:#000">padding</span>: <span style="color:#164"></span> <span style="color:#164">7px</span>;<br />}<br /><span style="color:#170">span</span>.<span style="color:#170">page-numbers</span>, <span style="color:#219">#pagination</span> <span style="color:#170">em</span> {<br />    <span style="color:#000">margin-right</span>: <span style="color:#164">7px</span>;<br />}<br /><span style="color:#170">a</span>.<span style="color:#170">page-numbers</span>:<span style="color:#170">hover</span>, <span style="color:#219">#pagination</span> <span style="color:#170">em</span>, <span style="color:#219">#pagination</span> .<span style="color:#170">current</span>, <span style="color:#219">#navigation</span> .<span style="color:#170">current</span>, .<span style="color:#170">begin-page</span>, .<span style="color:#170">end-page</span> {<br />    <span style="color:#000">background</span>: <span style="color:#164">none</span> <span style="color:#164">repeat</span> <span style="color:#164">scroll</span> <span style="color:#164"></span> <span style="color:#164"></span> <span style="color:#219">#B4B5B1</span>;<br />    <span style="color:#000">color</span>: <span style="color:#219">#FFFFFF</span>;<br />    <span style="color:#000">font-weight</span>: <span style="color:#164">700</span>;<br />}<br /><span style="color:#170">a</span>.<span style="color:#170">page-numbers</span>:<span style="color:#170">hover</span>, <span style="color:#219">#pagination</span> .<span style="color:#170">current</span>, <span style="color:#219">#navigation</span> .<span style="color:#170">current</span> {<br />    <span style="color:#000">position</span>: <span style="color:#164">relative</span>;<br />}<br /><span style="color:#170">a</span>.<span style="color:#170">page-numbers</span>:<span style="color:#170">hover</span>:<span style="color:#170">after</span>, <span style="color:#219">#pagination</span> .<span style="color:#170">current</span>:<span style="color:#170">after</span>, <span style="color:#219">#navigation</span> .<span style="color:#170">current</span>:<span style="color:#170">after</span> {<br />    <span style="color:#000">border-left</span>: <span style="color:#164">4px</span> <span style="color:#164">solid</span> <span style="color:#219">#B4B5B1</span>;<br />    <span style="color:#000">border-right</span>: <span style="color:#164">4px</span> <span style="color:#164">solid</span> <span style="color:#219">#B4B5B1</span>;<br />    <span style="color:#000">border-top</span>: <span style="color:#164">4px</span> <span style="color:#164">solid</span> <span style="color:#219">#FFFFFF</span>;<br />    <span style="color:#000">content</span>: <span style="color:#a11">""</span>;<br />    <span style="color:#000">height</span>: <span style="color:#164"></span>;<br />    <span style="color:#000">left</span>: <span style="color:#164">50%</span>;<br />    <span style="color:#000">margin-left</span>: <span style="color:#164">-4px</span>;<br />    <span style="color:#000">position</span>: <span style="color:#164">absolute</span>;<br />    <span style="color:#000">top</span>: <span style="color:#164"></span>;<br />    <span style="color:#000">width</span>: <span style="color:#164"></span>;<br />}<br />.<span style="color:#170">prev-page</span> <span style="color:#170">a</span>.<span style="color:#170">page-numbers</span>:<span style="color:#170">hover</span>:<span style="color:#170">after</span>, .<span style="color:#170">next-page</span> <span style="color:#170">a</span>.<span style="color:#170">page-numbers</span>:<span style="color:#170">hover</span>:<span style="color:#170">after</span> {<br />    <span style="color:#000">border</span>: <span style="color:#164">medium</span> <span style="color:#164">none</span>;<br />}<br /><span style="color:#170">a</span>.<span style="color:#170">page-numbers</span>:<span style="color:#170">hover</span> {<br />    <span style="color:#000">font-weight</span>: <span style="color:#164">400</span>;<br />}<br /><span style="color:#219">#pagination</span> <span style="color:#170">em</span> {<br />    <span style="color:#000">background</span>: <span style="color:#164">none</span> <span style="color:#164">repeat</span> <span style="color:#164">scroll</span> <span style="color:#164"></span> <span style="color:#164"></span> <span style="color:#219">#F4F5F1</span>;<br />    <span style="color:#000">color</span>: <span style="color:#219">#C4C5C1</span>;<br />}<br />.<span style="color:#170">prev-page</span> .<span style="color:#170">page-numbers</span>, .<span style="color:#170">next-page</span> .<span style="color:#170">page-numbers</span>, .<span style="color:#170">begin-page</span> .<span style="color:#170">page-numbers</span>, .<span style="color:#170">end-page</span> .<span style="color:#170">page-numbers</span> {<br />    <span style="color:#000">background</span>: <span style="color:#164">none</span> <span style="color:#164">repeat</span> <span style="color:#164">scroll</span> <span style="color:#164"></span> <span style="color:#164"></span> <span style="color:#164">rgba</span><span style="color:#164">(0</span>, <span style="color:#164"></span>, <span style="color:#164"></span>, <span style="color:#164"></span><span style="color:#164">)</span>;<br />}<br />.<span style="color:#170">prev-page</span> .<span style="color:#170">page-numbers</span>:<span style="color:#170">hover</span>, .<span style="color:#170">next-page</span> .<span style="color:#170">page-numbers</span>:<span style="color:#170">hover</span>, .<span style="color:#170">begin-page</span> .<span style="color:#170">page-numbers</span>:<span style="color:#170">hover</span>, .<span style="color:#170">end-page</span> .<span style="color:#170">page-numbers</span>:<span style="color:#170">hover</span> {<br />    <span style="color:#000">background</span>: <span style="color:#164">none</span> <span style="color:#164">repeat</span> <span style="color:#164">scroll</span> <span style="color:#164"></span> <span style="color:#164"></span> <span style="color:#164">rgba</span><span style="color:#164">(0</span>, <span style="color:#164"></span>, <span style="color:#164"></span>, <span style="color:#164"></span><span style="color:#164">)</span>;<br />    <span style="color:#000">color</span>: <span style="color:#219">#49629E</span>;<br />}</pre>

参考：zww大叔——http://zww.me/archives/25180 、 http://zww.me/archives/25173